{% extends 'inventory/base.html' %}

{% block content %}
<h2 class="mb-4">Current Inventory</h2>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="thead-dark">
            <tr>
                <th>Product Code</th>
                <th>Product Name</th>
                <th>UOM</th>
                <th>Current Stock</th>
                <th>Total Received</th>
                <th>Total Issued</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td>{{ product.product_code }}</td>
                <td>{{ product.product_name }}</td>
                <td>{{ product.unit_of_measure }}</td>
                <td class="{% if product.current_stock < 10 %}text-danger fw-bold{% endif %}">
                    {{ product.current_stock }}
                </td>
                <td>{{ product.total_in|default:"0" }}</td>
                <td>{{ product.total_out|default:"0" }}</td>
                <td>
                    <a href="{% url 'product_update' product.pk %}" class="btn btn-sm btn-warning">Edit</a>
                    <a href="{% url 'product_stock_movements' product.pk %}" class="btn btn-sm btn-info"><i class="fas fa-history"></i> View History</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center">No products in inventory</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-3 p-3 bg-light rounded">
    <h5>Inventory Summary</h5>
    <p>Total Products: {{ products.count }}</p>
    <p>Total Items in Stock: {{ total_value }}</p>
</div>
{% endblock %}